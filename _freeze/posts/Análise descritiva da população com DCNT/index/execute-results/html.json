{
  "hash": "65c81e62f817618b58c07118f063abdb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lendo dados da PNS\"\nauthor: \"Rafael W S Abreu\"\ndate: \"2024-06-19\"\ncategories: [TCC, R, Stats, Econometrics]\neditor_options: \n  chunk_output_type: console\n---\n\n\nSegue algumas dicas para a leitura de dados da PNS.\n\nEsse é o começo da análise feita para a minha Monografia para o curso de Economia na UFPR. Outros posts com a TAG de \"TCC\" fazem parte da mesma análise.\n\n## Pacotes\n\nEsse Chunk contém todas as bibliotecas usadas no decorrer de todo o trabalho.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) # utilizar a sintaxe tidyverse com o R\nlibrary(survey)    # análise de pesquisas complexas\nlibrary(srvyr)     # provê notação tidyverse para o pacote survey \nlibrary(PNSIBGE)   # acesso aos dados da PNS\nlibrary(broom)     # sumariza as informações dos modelos em formato tidy\nlibrary(gt)        # tabelas\nlibrary(gtExtras)  # formatação de tabelas\n```\n:::\n\n\n## Carga de Dados da PNS\n\nPara acessar os dados da PNS usaremos as funções do pacote PNSIBGE disponível no blog do Garbiel Assunção: <https://rpubs.com/gabriel-assuncao-ibge/pns>\n\na principal função utilizada é a 'get_pns()'\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Subgrupo de variáveis desejado:\nvariaveis_pns_2013 = c(\"C006\",  # sexo\n                       \"C008\",  # idade\n                       \"J007\",  # possui DCNT\n                       \"J014\",  # Usou serviço saúde nas últimas 2 semanas\n                       \"J037\",  # Internação nos últimos 12 meses\n                       \"J002\",  # Deixou de realizar atividades nas 2 últimas semanas por motivo de saúde\n                       \"J011\"  # Consulta médica nos últimos 12 meses\n                       )\n\nvariaveis_pns_2019 = c(\"C006\",  # sexo\n                       \"C008\",  # idade\n                       \"J007\",  # possui DCNT\n                       \"J014\",  # Usou serviço saúde nas últimas 2 semanas\n                       \"J037\",  # Internação nos últimos 12 meses\n                       \"J002\",  # Deixou de realizar atividades nas 2 últimas semanas por motivo de saúde\n                       \"J01101\"  # Consulta médica nos últimos 12 meses\n                       )\n\n# lendo os dados da PNS 2013 \npns13 <-\n  get_pns(\n    year = 2013,\n    selected = FALSE,\n    anthropometry = FALSE,\n    vars = variaveis_pns_2013,\n    labels = TRUE,\n    design = TRUE)\n\n# Vamos utilizar a versão sem pesos dos dados para obter informações sobre __labels__ e __levels__.\ndf_pns13 <-\n  get_pns(\n    year = 2013,\n    selected = FALSE,\n    anthropometry = FALSE,\n    vars = variaveis_pns_2013,\n    labels = TRUE,\n    design = FALSE)\n\n# Vamos trabalhar com o pacote srvyr e não com o survey,\n# por isso precisamos transformar survey.design2 em tbl.svy\np13 <- srvyr::as_survey(pns13)\n\n## Ajuste dos dados para aplicar regressão de Poisson\n## A regressão de Poisson requer que a variável objetivo seja numérica. \n## Neste caso vamos ajustar as variáveis categóricas para valores 0 ou 1.\nlevels(df_pns13$J007)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Sim\" \"Não\"\n```\n\n\n:::\n\n```{.r .cell-code}\nlevels(df_pns13$J014)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Sim\" \"Não\"\n```\n\n\n:::\n\n```{.r .cell-code}\nlevels(df_pns13$J037)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Sim\" \"Não\"\n```\n\n\n:::\n\n```{.r .cell-code}\nlevels(df_pns13$J002)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Sim\" \"Não\"\n```\n\n\n:::\n\n```{.r .cell-code}\nlevels(df_pns13$J011)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Nos doze últimos meses\"      \"De 1 ano a menos de 2 anos\" \n[3] \"De 2 anos a menos de 3 anos\" \"3 anos ou mais\"             \n[5] \"Nunca foi ao médico\"        \n```\n\n\n:::\n\n```{.r .cell-code}\nlevels(df_pns13$C006)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Masculino\" \"Feminino\" \n```\n\n\n:::\n\n```{.r .cell-code}\n# Vamos mudar o formato que a variável é apresentada para, no futuro, podermos realizar uma regressão de Poisson\np13 <- \n  p13 |> \n  mutate(iJ014 = if_else(J014 == \"Não\", 0, 1),\n         iJ037 = if_else(J037 == \"Não\", 0, 1),\n         iJ002 = if_else(J002 == \"Não\", 0, 1),\n         cJ011 = if_else(J011 == \"Nos doze últimos meses\", \"Sim\", \"Não\"),\n         iJ011 = if_else(J011 == \"Nos doze últimos meses\", 1, 0)) |> \n  mutate(J007 = relevel(J007, ref = \"Não\"))\n```\n:::\n\n\nNo final o objeto \"p13\" esta pronto para começarmos a análise\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}